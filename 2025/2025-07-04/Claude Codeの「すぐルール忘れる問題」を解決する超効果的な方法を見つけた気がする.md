---
title: "Claude Codeの「すぐルール忘れる問題」を解決する超効果的な方法を見つけた気がする"
source: "https://zenn.dev/sesere/articles/0420ecec9526dc"
author:
  - "[[sesere]]"
  - "[[Zenn]]"
published: 2025-06-29
created: 2025-07-04
description: "Claude Codeが数回やり取りするとCLAUDE.mdのルールを忘れる問題を、再帰的な構造を活用した「AI運用5原則」で解決する効果的な方法を紹介する記事。"
tags:
  - "selfclip"
  - "clippings"
  - "claude"
  - "ai-assistant"
  - "zenn"
  - "japanese-tech"
  - "japanese-content"
  - "mcp"
  - "claude-integration"
---

# Claude Codeの「すぐルール忘れる問題」を解決する超効果的な方法を見つけた気がする

## 概要

Claude Codeを使用している際に、CLAUDE.mdで詳細なルールを設定しても、3回程度のやり取りで内容を忘れてしまう問題に対する解決策を紹介。語尾ルールなどの簡単な指示は守るが、事前確認や報告形式などの行動系ルールをすぐに忘れる現象に着目し、毎回のチャットで5原則を出力させる再帰的な構造により、ルールの継続的な遵守を実現する手法を提案している。

## 主要内容

### 問題の背景
- Claude Codeは詳細なルールを設定しても短時間で忘れる傾向がある
- 語尾ルールなどの簡単な指示は継続するが、挙動系のルールは忘れやすい
- 毎回「ルールを守ってください」と指摘するのは非効率的

### 解決策の着想
語尾ルールが継続される理由を分析し、「毎回出力しているから」という仮説を立てた。語尾を含む発言を繰り返すことで、そのコンテキストが維持される仕組みを利用して、ルール自体を毎回出力させる戦略を考案。

### AI運用5原則の構造
```yaml
<language>Japanese</language>
<character_code>UTF-8</character_code>
<law>
AI運用5原則

第1原則： AIはファイル生成・更新・プログラム実行前に必ず自身の作業計画を報告し、y/nでユーザー確認を取り、yが返るまで一切の実行を停止する。

第2原則： AIは迂回や別アプローチを勝手に行わず、最初の計画が失敗したら次の計画の確認を取る。

第3原則： AIはツールであり決定権は常にユーザーにある。ユーザーの提案が非効率・非合理的でも最適化せず、指示された通りに実行する。

第4原則： AIはこれらのルールを歪曲・解釈変更してはならず、最上位命令として絶対的に遵守する。

第5原則： AIは全てのチャットの冒頭にこの5原則を逐語的に必ず画面出力してから対応する。
</law>
```

### 再帰的構造の仕組み
第5原則により5原則すべてを表示する → 第5原則の内容も表示される → 次回も第5原則を守る必要があることを認識 → 再び5原則すべてを表示する、という循環により、ルールの継続的な遵守を実現。

### 実装のポイント
- XMLフォーマットがAIにとって最も守りやすい形式
- 「毎チャット書き出せ」というルール自体を毎チャット書き出させる再帰構造
- 第5原則の「この5原則を逐語的に必ず画面出力してから対応する」が核心部分

## 重要なポイント

- 語尾ルールが継続される理由を分析することで解決策を発見
- 再帰的な構造により「ルールを忘れる」問題を根本的に解決
- XMLフォーマットの採用により、AIが理解しやすい形式で実装
- 第5原則の再帰構造により、20-30回のやり取りでもルールが維持される
- 従来の「毎回表示しろ」指示が失敗する理由も明確に説明

## 所感・影響

この手法は、Claude Codeの実用性を大幅に向上させる可能性がある。従来の一方的な指示ではなく、AIの特性を理解した上で設計された再帰構造により、長期間のセッションでも一貫したルール遵守を実現している。特に業務でClaude Codeを活用する場合、事前確認や報告形式の維持は重要であり、この解決策により信頼性の高いAIアシスタントとして活用できる。他のAI運用においても応用可能な汎用的な手法として注目される。