# Step1.5: Clipsフォルダのまとめ変換コマンド

clipsフォルダ内の手動クリップコンテンツを今日の個別まとめ形式に変換し、今日のフォルダに統合します。
※clipsフォルダには新着記事フローとは独立して、ユーザーが興味を持ったWebコンテンツが手動で保存されています。

## 実行手順

1. **clipsフォルダの確認**
   - `/Users/yuugouohno/obsidian-vault/02_notes/catch_up/clips/` フォルダの存在確認
   - フォルダ内の `.md` ファイルを検索

2. **今日の日付フォルダ確認**
   - 今日の日付（YYYY-MM-DD）を取得
   - `YYYY/YYYY-MM-DD/` フォルダの存在確認（なければ作成）

3. **各clipsファイルの処理**
   - 各 `.md` ファイルを読み込み
   - 既存のメタデータ（title, source, author, published, description）を抽出
   - `.claude/templates/article_template.md`の形式に従って変換

4. **新しいテンプレート形式での変換**
   - **形式**: `.claude/templates/article_template.md`で定義された統一形式を**厳密に遵守**
   - 既存メタデータを保持し、created日付のみ今日で更新
   - コンテンツ部分は統一テンプレートに従って再構成
   - **必須**: テンプレートで定義されたMarkdown形式とメタデータ構造を完全に適用

5. **インテリジェントタグ付け（手動クリップ専用）**
   - `.claude/templates/article_template.md`のタグ付けルールを**厳格に適用**
   - 手動クリップ用タグルールに従って自動タグ付け

6. **ファイル保存と削除**
   - 変換されたファイルを `YYYY/YYYY-MM-DD/[記事タイトル].md` として保存
   - ファイル名は適切な文字に変換（特殊文字の置換など）
   - 処理が完了したclipsファイルを削除

7. **処理結果出力**
   - 処理されたファイル数
   - 変換成功/失敗の件数
   - 各記事に付与されたタグの一覧
   - エラーがある場合は詳細

## 使用ツール
- **Bash**: 今日の日付取得とフォルダ作成
- **Glob**: clipsフォルダ内の.mdファイル検索
- **Read**: 各clipsファイルの読み込み
- **WebFetch**: コンテンツの要約生成（必要に応じて）
- **Write**: 新形式でのファイル生成
- **Bash**: 元のclipsファイル削除

## 実行条件
- clipsフォルダ内に `.md` ファイルが存在する場合のみ実行
- ファイルが存在しない場合は「処理対象なし」として終了

## エラー処理
- 既存ファイルが不正な形式の場合はスキップ
- ファイル名に使用できない文字は自動的に置換
- 重複するファイル名の場合は連番を追加

---

**実行開始**: 上記の手順に従ってclipsファイルの変換処理を実行してください。

**ワークフローでの位置づけ**:
- 新着記事フロー（`/daily_research_sync` → `/fetch_and_summarize_today`）とは独立
- 手動でクリップしたコンテンツを今日のフォルダに統合
- `/generate_daily_abstract` 実行前に処理することで、新着記事と手動クリップの両方を統合サマリーに含める